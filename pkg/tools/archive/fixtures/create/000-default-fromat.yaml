task:
  matrix:
    kernel:
    - windows
    - linux
  # format:
  files:
  - from: testdata/top-level.txt
    to: ""
  - from: testdata/top-level.txt
    to: /

  output@template: |-
    {{- filepath.Join env.DUKKHA_CACHE_DIR "test.tar" -}}
---
actual:
  top-level@template?str|archivefile?str: |-
    {{- filepath.Join env.DUKKHA_CACHE_DIR "test.tar" -}}:top-level.txt
  root-top-level@template?str|archivefile?str: |-
    {{- filepath.Join env.DUKKHA_CACHE_DIR "test.tar" -}}:/top-level.txt
expected:
  top-level@file?str: testdata/top-level.txt
  root-top-level@file?str: testdata/top-level.txt
