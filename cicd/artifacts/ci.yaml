workflow:run:
- name: build-artifacts
  jobs:
  - task: golang:build(dukkha, {})

- name: sign-artifacts
  jobs:
  # TODO
  # - task: cosign:sign(dukkha, {})

- name: upload-artifacts
  jobs:
  - task: docker:login(ghcr, {})
  - task: cosign:upload(dukkha, {})

- name: create-release
  jobs:
  - task: workflow:run:(gen-artifacts-checksum, {})
  - task: archive:create(dukkha, {})
  - chdir: build
    shell: |-
      openssl dgst -sha256 *.tar* *.zip > sha256.txt
      openssl dgst -sha512 *.tar* *.zip > sha512.txt
      openssl dgst -md5 *.tar* *.zip > md5.txt
  # - task: github:release(dukkha, {})
